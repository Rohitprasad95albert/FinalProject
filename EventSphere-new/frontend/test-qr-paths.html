<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>QR Path Test - EventSphere</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-4xl mx-auto bg-white rounded-lg shadow-lg p-6">
        <h1 class="text-2xl font-bold mb-6">QR Code Path Test</h1>
        
        <div class="space-y-4">
            <div class="p-4 bg-blue-50 rounded-lg">
                <h3 class="font-semibold mb-2">Current Location Info:</h3>
                <p><strong>Origin:</strong> <span id="origin"></span></p>
                <p><strong>Path:</strong> <span id="path"></span></p>
                <p><strong>Full URL:</strong> <span id="fullUrl"></span></p>
                <p><strong>Live Server Detected:</strong> <span id="liveServer"></span></p>
            </div>
            
            <div class="p-4 bg-green-50 rounded-lg">
                <h3 class="font-semibold mb-2">Test QR Code URLs:</h3>
                <div class="space-y-2">
                    <button onclick="testPath('/qr-attendance.html?qrId=test123')" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
                        Test: /qr-attendance.html
                    </button>
                    <button onclick="testPath('/frontend/qr-attendance.html?qrId=test123')" class="px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600">
                        Test: /frontend/qr-attendance.html
                    </button>
                    <button onclick="testPath('qr-attendance.html?qrId=test123')" class="px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600">
                        Test: qr-attendance.html (relative)
                    </button>
                </div>
            </div>
            
            <div class="p-4 bg-yellow-50 rounded-lg">
                <h3 class="font-semibold mb-2">File Access Test:</h3>
                <div id="fileTest" class="space-y-2">
                    <p>Testing file access...</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Display current location info
        document.getElementById('origin').textContent = window.location.origin;
        document.getElementById('path').textContent = window.location.pathname;
        document.getElementById('fullUrl').textContent = window.location.href;
        document.getElementById('liveServer').textContent = 
            (window.location.origin.includes('127.0.0.1:5500') || window.location.origin.includes('localhost:5500')) ? 'Yes' : 'No';

        function testPath(path) {
            const fullUrl = window.location.origin + path;
            console.log('Testing path:', fullUrl);
            
            // Try to fetch the file to see if it exists
            fetch(fullUrl)
                .then(response => {
                    if (response.ok) {
                        alert(`✅ SUCCESS: ${fullUrl}\nStatus: ${response.status}`);
                    } else {
                        alert(`❌ FAILED: ${fullUrl}\nStatus: ${response.status} ${response.statusText}`);
                    }
                })
                .catch(error => {
                    alert(`❌ ERROR: ${fullUrl}\nError: ${error.message}`);
                });
        }

        // Test file access on page load
        window.addEventListener('load', function() {
            const fileTest = document.getElementById('fileTest');
            const testPaths = [
                '/qr-attendance.html',
                '/frontend/qr-attendance.html',
                'qr-attendance.html'
            ];

            testPaths.forEach(path => {
                const fullUrl = window.location.origin + path;
                fetch(fullUrl)
                    .then(response => {
                        const status = response.ok ? '✅' : '❌';
                        fileTest.innerHTML += `<p>${status} ${fullUrl} - ${response.status}</p>`;
                    })
                    .catch(error => {
                        fileTest.innerHTML += `<p>❌ ${fullUrl} - Error: ${error.message}</p>`;
                    });
            });
        });
    </script>
</body>
</html>
